
@{
    ViewData["Title"] = "Tree";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>

<!-- Font Awesome CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">



<div>
    <h1>Tree </h1> with root ID:
    <div class="d-inline" id="tree_id">
        @Html.DisplayFor(model => model)
    </div>
</div>

@if (User.IsInRole("admin"))
{
    @if (TempData["msg"] != null)
    {
    <div class="alert alert-success">@TempData["msg"]</div>
    }

    <ul id="tree" name="tree"></ul>

    <div class="modal fade" id="editItem" tabindex="-1" role="dialog" aria-labelledby="edit"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form action="" method="POST" id="edit_form">
                    <div class="modal-body mx-3">
                        <div class="md-form mb-5">
                            <div class="form-group">
                                <label for="selected">
                                    Selected:
                                </label>
                                <input class="form-control" id="selected_value" name="Value" value="" />
                            </div>
                        </div>
                        <div class="md-form mb-5">
                            <div class="form-group">
                                <label for="parent">
                                    Move to:
                                </label>
                                <select class="form-control" id="select_parent_edit" name="Parent">
                                    <option value="">[set as root]</option>
                                </select>
                            </div>
                        </div>
                        <input class="form-control" id="selected_id" name="ID" value="" hidden />
                        <input class="form-control" name="rootId" value="" hidden />


                    </div>
                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-primary">Save</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <div class="modal fade" id="addItem" tabindex="-1" role="dialog" aria-labelledby="add"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form action="/TreeItems/CreateSimple" method="POST" id="add_form">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="modal-body mx-3">
                        <div class="md-form mb-5">
                            <div class="form-group">
                                <label for="new_value">
                                    New value:
                                </label>
                                <input class="form-control" id="new_value" name="Value" value="" />
                            </div>
                        </div>
                        <div class="md-form mb-5">
                            <div class="form-group">
                                <label for="parent">
                                    Move to:
                                </label>
                                <select class="form-control" id="select_parent_add" name="Parent">
                                    <option value="">[set as root]</option>
                                </select>
                            </div>
                        </div>
                        <input class="form-control" name="rootId" value="" hidden />

                    </div>
                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-primary">Save</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

}
else
{
    <p>Sorry, this page is only for Administrators</p>
}
<script src="~/js/controller.js"></script>
<script src="~/js/iconClass.js"></script>
<script src="~/js/iconActions.js"></script>
<script src="~/js/treeView.js"></script>
<script src="~/js/prepareRow.js"></script>
<script src="~/js/setActionsToIcons.js"></script>


